{"version":3,"file":"drag.js","sourceRoot":"","sources":["../../.tmp/shared/drag.ts"],"names":[],"mappings":"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","sourcesContent":["declare var $: any;\r\n\r\ninterface JQuery {\r\n   drag(opt?: any): any;\r\n}\r\n\r\n// tslint:disable-next-line:no-shadowed-variable\r\n(($) => {\r\n    $.fn.drag = function(opt: any) {\r\n        opt = $.extend({handle: '', cursor: 'move'}, opt);\r\n\r\n        let $el = this;\r\n        if (opt.handle === '') {\r\n            $el = this;\r\n        } else {\r\n            $el = this.find(opt.handle);\r\n        }\r\n\r\n        return $el.css('cursor', opt.cursor).on('mousedown', function(e: any) {\r\n            let $drag: any;\r\n            if (opt.handle === '') {\r\n                $drag = $(this).addClass('draggable');\r\n            } else {\r\n                $drag = $(this).addClass('active-handle').parent().addClass('draggable');\r\n            }\r\n\r\n            $(window).resize(function(this: any) {\r\n                $drag.css('top', '');\r\n                $drag.css('left', '');\r\n            });\r\n\r\n            let zIdx: number = $drag.css('z-index');\r\n            let drgH: number = $drag.outerHeight();\r\n            let drgW: number = $drag.outerWidth();\r\n            let posY: number = $drag.offset().top + drgH - e.pageY;\r\n            let posX: number = $drag.offset().left + drgW - e.pageX;\r\n\r\n            $drag.css('z-index', 1000).parents().on('mousemove', (ef: any) => {\r\n                let wdth = $(window).width() - 17; // $(this).parents('.modal-content')[0]['clientWidth'];\r\n\r\n                $('.draggable').offset({\r\n                    top: (ef.pageY + posY - drgH) > $(window).scrollTop() ? (ef.pageY + posY - drgH) : $(window).scrollTop(),\r\n                    left: (ef.pageX + posX - drgW) > 0 ? ((ef.pageX + posX) >= wdth ? (wdth - drgW) : (ef.pageX + posX - drgW)) : 0\r\n                })\r\n                .on('mouseup', function() {\r\n                    $(this).removeClass('draggable').css('z-index', zIdx);\r\n                });\r\n            });\r\n            e.preventDefault(); // disable selection\r\n        })\r\n        .on('mouseup', function(this: any) {\r\n            if (opt.handle === '') {\r\n                $(this).removeClass('draggable');\r\n            } else {\r\n                $(this).removeClass('active-handle').parent().removeClass('draggable');\r\n            }\r\n        });\r\n    };\r\n})($);\r\n"]}